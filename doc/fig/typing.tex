\begin{figure*}
  \begin{mathpar}
    \fbox{$\seq{\ty{\Gamma}}{\ty{\Delta}}{M}{T}$}\hfill
    \\
    \inferrule*[lab=T-Var]{
      \ty{\Gamma}(\tm{x})=\ty{T}
    }{\seq{\ty{\Gamma}}{\ty{\envemp}}{x}{T}}
  
    \inferrule*[lab=T-Abs]{
      \seq{\ty{\Gamma},\tmty{x}{T}}{\ty{\Sigma'}}{M}{U}
    }{\seq{\ty{\Gamma}}{\ty{\envemp}}{\lambda x.M}{\tyfun[\ty{\Sigma'}]{T}{U}}}
  
    \inferrule*[lab=T-App]{
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{M}{\tyfun[\ty{\Sigma''}]{T}{U}}
      \\
      \seq{\ty{\Gamma}}{\ty{\Sigma'}}{N}{T}
      \\
      \ty{\Sigma}\sqcup\ty{\Sigma'}\sqsubseteq\ty{\Sigma''}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma''}}{M\;N}{U}}

    \inferrule*[lab=T-Unit]{
    }{\seq{\ty{\Gamma}}{\ty{\envemp}}{\unit}{\tyunit}}
    
    \inferrule*[lab=T-Domain]{
    }{\seq{\ty{\Gamma}}{\ty{\envemp}}{d}{\tyD{d}}}

    \inferrule*[lab=T-Location]{
    }{\seq{\ty{\Gamma}}{\tmty{\ell}{\tyL{\frz}{l,u}}}{\ell}{\tyL{\frz}{l,u}}}

    \inferrule*[lab=T-Threshold]{
      \incomp({\tyJ})
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{\tmJ}{\tyJ}}

    \inferrule*[lab=T-New]{
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{\lvarnew}{\tyL{\false}{\bot,\bot}}}

    \inferrule*[lab=T-Freeze]{
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{M}{\tyL{\true}{l,u}}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{\lvarfreeze\;M}{\tyL{\true}{l,u}}}

    \inferrule*[lab=T-Get]{
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{M}{\tyL{\frz}{l,u}}
      \\
      \seq{\ty{\Gamma}}{\ty{\Sigma'}}{N}{\tyJ}
      \\
      \ty{d}\in\tyJ
      \\
      \ty{d}\sqsubseteq\ty{u}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}\sqcup\ty{\Sigma'}}{\lvarget\;M\;N}{\tyD{d}}}
  
    \inferrule*[lab=T-Put]{
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{M}{\tyL{\false}{l,d}}
      \\
      \seq{\ty{\Gamma}}{\ty{\Sigma'}}{N}{\tyD{d}}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}\sqcup\ty{\Sigma'}}{\lvarput\;M\;N}{1}}
  \end{mathpar}
  \caption{Typing rules for \lambdalvar terms.}
  \label{fig:typing}
\end{figure*}
