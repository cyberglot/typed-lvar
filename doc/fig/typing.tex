\begin{figure*}
  \begin{mathpar}
    \fbox{$\seq{\ty{\Gamma}}{\ty{\Sigma}}{M}{T}$}\hfill
    \\
    \inferrule*[lab=T-Var]{
      \ty{\Gamma(x)}=\ty{T}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{x}{T}}
  
    \inferrule*[lab=T-Lam]{
      \seq{\ty{\Gamma},\tmty{x}{T}}{\ty{\Sigma'}}{M}{U}
      \\
      \ty{\Sigma}\sqsubseteq\ty{\Sigma'}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{\lambda x.M}{\tyfun{T}{U}}}
  
    \inferrule*[lab=T-App]{
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{M}{\tyfun{T}{U}}
      \\
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{N}{T}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{M\;N}{U}}

    \inferrule*[lab=T-Unit]{
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{\unit}{\tyunit}}
    
    \inferrule*[lab=T-Sub]{
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{M}{T}
      \\
      \ty{T}\sqsubseteq\ty{U}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{M}{U}}

    \inferrule*[lab=T-Domain]{
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{d}{\tyD{d}}}

    \inferrule*[lab=T-Location]{
      \ty{\Sigma(l)}=\ty{\tyRef{\frz}{d}}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{l}{\tyRef{\frz}{d}}}
  
    \inferrule*[lab=T-Threshold]{
      \incomp({\tyJ})
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{\tmJ}{\tyJ}}
    \\ 
    \inferrule*[lab=T-New]{
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{\lvarnew}{\tyRef{\false}{\bot}}}
  
    \inferrule*[lab=T-Freeze]{
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{M}{\tySource{\true}{d}}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{\lvarfreeze\;M}{\tyD{d}}}
    \\ 
    \inferrule*[lab=T-Get]{
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{M}{\tySource{\frz}{d}}
      \\
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{N}{\tyJ}
      \\
      \ty{d'}\in\tyJ
      \\
      \ty{d'}\sqsubseteq\ty{d}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{\lvarget\;M\;N}{\tyD{d}}}
  
    \inferrule*[lab=T-Put]{
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{M}{\tySink{\false}{d}}
      \\
      \seq{\ty{\Gamma}}{\ty{\Sigma}}{N}{\tyD{d}}
    }{\seq{\ty{\Gamma}}{\ty{\Sigma}}{\lvarput\;M\;N}{1}}
  \end{mathpar}
  \caption{Typing rules for \lambdalvar terms.}
  \label{fig:typing}
\end{figure*}
